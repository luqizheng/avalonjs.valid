<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../lib/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="../lib/bootstrap/css/bootstrap-theme.css">
    <script src="../lib/avalon.js"></script>
    <script src="../dist/avalon.valid-1.0.js"></script>

    <style>
        .has-error-s {
            background-color: #cfcfcf;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-md-5">
                <div class="panel" ms-controller="changePassword">
                    <div class="panel-title">
                        <h3>修改密码</h3>
                    </div>
                    <div class="panel-body">
                        <div>
                            {{newPasswordEndMark}}
                        </div>
                        <form>
                            <div class="form-group" ms-val-class-error="has-error:model.password" ms-val-class-error-1="has-error-s:model.password">
                                <label class="control-label">当前密码</label>
                                <input class="form-control" type="password" ms-val="model.password" val-required="val-required" ms-duplex="model.password"></input>
                                <span class="help-block" ms-val-display="model.password"></span>
                                 {{model.password}}
                            </div>

                            <div class="form-group" ms-val-class-error="has-error:model.newPassword" ms-val-class-success="has-success:model.newPassword">
                                <label class="control-label">新密码</label>
                                <input class="form-control" type="password" ms-val="model.newPassword" val-required-error="请输入新密码" val-success="正确" ms-duplex="model.newPassword"></input>
                                <!-- 分开显示成功和失败 -->
                                <span class="help-block" ms-val-display-error="model.newPassword" style="color:#00ff00"></span>
                                <span class="help-block" ms-val-display-success="model.newPassword"></span>
                                 {{model.newPassword}}
                            </div>
                            <div class="form-group" ms-val-class-error="has-error:model.confirmPassword" ms-val-class-success="has-success:model.confirmPassword">
                                <label class="control-label">再一次新密码</label>
                                <input class="form-control" type="password" 
                                       ms-val="model.confirmPassword"
                                       val-required-error="请再一次输入新密码" val-success="再一次密码输入正确" 
                                       ms-duplex="model.confirmPassword"
                                       val-equal-compare="model.newPassword" val-equal-error="两次密码不正确"
                                       >
                                       
                                       
                                       </input>

                                <span class="help-block" ms-val-display="model.confirmPassword"></span>
                                 {{model.confirmPassword}}
                            </div>
                            <div class="form-actions">
                                <input type="button" value="submit" ms-click="submit">
                                <button ms-click="changeEndMark" type="button">改变新密码提示的结束符号</button>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="panel-title">
                        标签说明
                    </div>
                    <div class="panel-body">
                        基本标签
                        <ul>
                            <li>ms-val="XXX"</li>
                            <li>ms-val-display="xxx"</li>
                            <li>ms-val-class-error ms-val-class-success = "className:propName"</li>
                        </ul>


                    </div>
                </div>
            </div>
            <script>
                var vm1 = avalon.define({
                $id: "changePassword",
                model:{
                    newPassword: "",
                    password:"",
                    confirmPassword:""
                },
                
                submit:function(){
                    vm1.$val.valid(function(isPass){
                        alert(isPass)
                    });
                },
                newPasswordEndMark:"^_^",
                changeEndMark:function(){
                  vm1.newPasswordEndMark = (new Date()).getTime();
                }
                
                
            });
            </script>
        </div>     
        <!--
        <div class="row">
            <div class="col-md-5" ms-controller="numberTest">
                <form action="#">
                    <div class="form-group" ms-val-class-error="has-error:number" ms-val-class-error-1="has-error-s:number">
                        <label class="control-label">数值</label>
                        <input class="form-control" type="number" ms-val-required="number" data-val-required-error="请输入数值" ms-duplex-number="number"
                        ms-val-range="number" data-val-range-error="数值必须在[min]和[max]之间" data-val-range-min="6" data-val-range-max="15"></input>
                        <span class="help-block" ms-val-display="number"></span>
                    </div>
                    <div class="col-md-12">
                        <input type="button" value="submit" ms-click="submit">
                    </div>

                </form>
            </div>
            <div class=col-md-5>
            </div>

            <script>
                var numberTest = avalon.define({
                $id: "numberTest",
                number: 3,
                submit:function(){
                    console.log(typeof numberTest.number)
                }
            });
            </script>
        </div>

-->
    </div>

</body>

</html>